@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css');
@tailwind base;
@tailwind components;
@tailwind utilities;

/* TreeGrid 스타일 - 다크/라이트 모드 지원 */
.tree-table {
  width: 100%;
  height: 100%;
  overflow: auto;
  font-size: 13px;
  border-collapse: collapse;
}

/* 다크모드 TreeGrid */
.dark .tree-table {
  background: #1e1e1e;
  color: #d4d4d4;
}

/* 라이트모드 TreeGrid */
.tree-table {
  background: #ffffff;
  color: #1f2937;
}

.tree-table th {
  padding: 8px;
  text-align: left;
  position: sticky;
  top: 0;
  z-index: 10;
  font-weight: 600;
  white-space: nowrap;
}

.dark .tree-table th {
  background: #2d2d30;
  color: #cccccc;
  border: 1px solid #3c3c3c;
  font-weight: normal;
}

.tree-table th {
  background: #f3f4f6;
  color: #111827;
  border: 1px solid #e5e7eb;
}

.tree-table td {
  padding: 6px 8px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.dark .tree-table td {
  border: 1px solid #3c3c3c;
}

.tree-table td {
  border: 1px solid #e5e7eb;
}

.dark .tree-table tr:hover {
  background: #2d2d30;
}

.tree-table tr:hover {
  background: #f9fafb;
}

.dark .tree-table tr.selected {
  background: #094771;
}

.tree-table tr.selected {
  background: #dbeafe;
}

.grid-container {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
}

.dark .grid-container {
  background: #1e1e1e;
}

.grid-container {
  background: #ffffff;
}

.toolbar {
  padding: 8px;
  display: flex;
  gap: 8px;
  align-items: center;
}

.dark .toolbar {
  background: #2d2d30;
  border-bottom: 1px solid #3c3c3c;
}

.toolbar {
  background: #f9fafb;
  border-bottom: 1px solid #e5e7eb;
}

.tree-cell {
  display: flex;
  align-items: center;
  gap: 4px;
}

.tree-cell-icon {
  cursor: pointer;
  user-select: none;
}

.tree-indent {
  display: inline-block;
  width: 20px;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 221.2 83.2% 53.3%;
    
    --radius: 0.5rem;
  }
  
  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 222.2 47.4% 11.2%;
    
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 224.3 76.3% 48%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

@layer components {
  /* Card Component */
  .card {
    @apply rounded-lg border bg-card text-card-foreground shadow-sm;
  }
  
  .card-header {
    @apply flex flex-col space-y-1.5 p-6;
  }
  
  .card-title {
    @apply text-2xl font-semibold leading-none tracking-tight;
  }
  
  .card-description {
    @apply text-sm text-muted-foreground;
  }
  
  .card-content {
    @apply p-6 pt-0;
  }
  
  .card-footer {
    @apply flex items-center p-6 pt-0;
  }
  
  /* Button Variants */
  .btn {
    @apply inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50;
  }
  
  .btn-primary {
    @apply bg-primary text-primary-foreground hover:bg-primary/90;
  }
  
  .btn-secondary {
    @apply bg-secondary text-secondary-foreground hover:bg-secondary/80;
  }
  
  .btn-destructive {
    @apply bg-destructive text-destructive-foreground hover:bg-destructive/90;
  }
  
  .btn-outline {
    @apply border border-input bg-background hover:bg-accent hover:text-accent-foreground;
  }
  
  .btn-ghost {
    @apply hover:bg-accent hover:text-accent-foreground;
  }
  
  .btn-link {
    @apply text-primary underline-offset-4 hover:underline;
  }
  
  /* Button Sizes */
  .btn-sm {
    @apply h-9 px-3;
  }
  
  .btn-default {
    @apply h-10 px-4 py-2;
  }
  
  .btn-lg {
    @apply h-11 px-8;
  }
  
  .btn-icon {
    @apply h-10 w-10;
  }
  
  /* Input Components */
  .input {
    @apply flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
  }
  
  .label {
    @apply text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70;
  }
  
  .select {
    @apply flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
  }
  
  /* Badge Component */
  .badge {
    @apply inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2;
  }
  
  .badge-primary {
    @apply border-transparent bg-primary text-primary-foreground;
  }
  
  .badge-secondary {
    @apply border-transparent bg-secondary text-secondary-foreground;
  }
  
  .badge-destructive {
    @apply border-transparent bg-destructive text-destructive-foreground;
  }
  
  .badge-outline {
    @apply text-foreground;
  }
  
  /* Alert Component */
  .alert {
    @apply relative w-full rounded-lg border p-4;
  }
  
  .alert-primary {
    @apply border-primary/50 text-primary bg-primary/10;
  }
  
  .alert-destructive {
    @apply border-destructive/50 text-destructive bg-destructive/10;
  }
  
  /* Table Component */
  .table {
    @apply w-full caption-bottom text-sm;
  }
  
  .table-header {
    @apply [&_tr]:border-b;
  }
  
  .table-body {
    @apply [&_tr:last-child]:border-0;
  }
  
  .table-row {
    @apply border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted;
  }
  
  .table-head {
    @apply h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0;
  }
  
  .table-cell {
    @apply p-4 align-middle [&:has([role=checkbox])]:pr-0;
  }
  
  /* BOM Specific Styles */
  .bom-legend-item {
    @apply inline-flex items-center gap-2 px-3 py-1 text-xs font-medium;
  }
  
  .bom-legend-color {
    @apply h-3 w-3 rounded-sm;
  }
  
  /* Tree View */
  .tree-node {
    @apply flex items-center gap-2 px-3 py-2 hover:bg-accent rounded-md cursor-pointer transition-colors;
  }
  
  .tree-node-selected {
    @apply bg-primary/10 text-primary;
  }
  
  /* Context Menu */
  .context-menu-item {
    @apply relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50;
  }
  
  .context-menu-separator {
    @apply -mx-1 my-1 h-px bg-muted;
  }
}

@layer utilities {
  /* Hide scrollbar for Chrome, Safari and Opera */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  
  /* Hide scrollbar for IE, Edge and Firefox */
  .no-scrollbar {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }
  
  /* Custom ag-Grid Dark Theme */
  .dark .ag-theme-alpine-dark,
  .dark .ag-theme-alpine {
    --ag-background-color: #1e1e1e;
    --ag-foreground-color: #cccccc;
    --ag-border-color: #3e3e42;
    --ag-header-background-color: #2d2d30;
    --ag-header-foreground-color: #cccccc;
    --ag-odd-row-background-color: #252526;
    --ag-row-hover-color: #2a2d2e;
    --ag-selected-row-background-color: #094771;
    --ag-cell-horizontal-border: #3e3e42;
    --ag-range-selection-border-color: #007acc;
    --ag-range-selection-background-color: rgba(0, 122, 204, 0.1);
    --ag-input-border-color: #3e3e42;
    --ag-input-background-color: #3c3c3c;
    --ag-input-foreground-color: #cccccc;
    --ag-disabled-foreground-color: #6a6a6a;
    --ag-modal-overlay-background-color: rgba(0, 0, 0, 0.7);
    --ag-popup-background-color: #2d2d30;
    --ag-popup-border-color: #3e3e42;
  }

  /* Custom ag-Grid Light Theme */
  .ag-theme-alpine {
    --ag-background-color: #ffffff;
    --ag-foreground-color: #1f2937;
    --ag-border-color: #e5e7eb;
    --ag-header-background-color: #f3f4f6;
    --ag-header-foreground-color: #111827;
    --ag-header-font-weight: 600;
    --ag-odd-row-background-color: #f9fafb;
    --ag-row-hover-color: #f3f4f6;
    --ag-selected-row-background-color: #dbeafe;
    --ag-cell-horizontal-border: #e5e7eb;
    --ag-range-selection-border-color: #3b82f6;
    --ag-range-selection-background-color: rgba(59, 130, 246, 0.1);
    --ag-input-border-color: #d1d5db;
    --ag-input-background-color: #ffffff;
    --ag-input-foreground-color: #1f2937;
    --ag-disabled-foreground-color: #9ca3af;
    --ag-modal-overlay-background-color: rgba(0, 0, 0, 0.4);
    --ag-popup-background-color: #ffffff;
    --ag-popup-border-color: #e5e7eb;
    --ag-font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  }

  /* ag-Grid Font Settings */
  .ag-theme-alpine,
  .ag-theme-alpine-dark {
    font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  }

  /* Light mode specific text colors for better readability */
  .ag-theme-alpine .ag-cell {
    color: #1f2937;
    font-weight: 500;
  }

  .dark .ag-theme-alpine .ag-cell {
    color: #d1d5db;
    font-weight: 400;
  }
  
  /* BOM Grid Cell Highlights */
  .bom-cell-search {
    @apply !bg-bom-search;
  }
  
  .bom-cell-deployed {
    @apply !bg-bom-deployed;
  }
  
  .bom-cell-modified {
    @apply !bg-bom-modified;
  }
  
  .bom-cell-deleted {
    @apply !bg-bom-deleted;
  }
  
  .bom-cell-required {
    @apply !bg-bom-required;
  }
  
  .bom-cell-eono {
    @apply !bg-bom-eono;
  }
  
  .bom-cell-existing {
    @apply !bg-bom-existing;
  }

  /* 알림 애니메이션 - 깜빡임 효과 */
  @keyframes blink {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.3;
    }
  }

  .animate-blink {
    animation: blink 1s ease-in-out infinite;
  }

  /* 강한 깜빡임 효과 */
  @keyframes strong-blink {
    0%, 100% {
      opacity: 1;
      background-color: rgba(255, 204, 0, 0.3);
      transform: scale(1);
    }
    25% {
      opacity: 0.7;
      background-color: rgba(255, 107, 107, 0.5);
      transform: scale(1.05);
    }
    50% {
      opacity: 1;
      background-color: rgba(255, 204, 0, 0.6);
      transform: scale(1.1);
    }
    75% {
      opacity: 0.7;
      background-color: rgba(255, 107, 107, 0.5);
      transform: scale(1.05);
    }
  }

  .animate-strong-blink {
    animation: strong-blink 0.5s ease-in-out infinite;
    display: inline-block;
  }

  /* 검색 하이라이트 애니메이션 */
  @keyframes highlight-pulse {
    0% {
      background-color: rgba(250, 204, 21, 0.8);
      box-shadow: 0 0 0 0 rgba(250, 204, 21, 0.4);
    }
    50% {
      background-color: rgba(250, 204, 21, 1);
      box-shadow: 0 0 8px 2px rgba(250, 204, 21, 0.6);
    }
    100% {
      background-color: rgba(250, 204, 21, 0.8);
      box-shadow: 0 0 0 0 rgba(250, 204, 21, 0.4);
    }
  }

  .search-highlight {
    background-color: #facc15;
    color: #000;
    padding: 1px 3px;
    border-radius: 2px;
    font-weight: bold;
    animation: highlight-pulse 1s ease-in-out infinite;
    display: inline-block;
  }

  /* Enhanced Level Indicator Styles */
  .level-indicator-container {
    position: relative;
    transition: all 0.2s ease;
  }

  .level-badge {
    user-select: none;
    transition: all 0.2s ease;
    cursor: pointer;
  }

  .level-badge:hover {
    transform: scale(1.05);
  }

  .level-badge:active {
    transform: scale(0.95) !important;
  }

  .expand-toggle {
    transition: all 0.2s ease;
  }

  .expand-toggle:hover {
    opacity: 0.8;
  }

  .hierarchy-line {
    transition: opacity 0.2s ease;
  }

  .level-tooltip {
    animation: fadeIn 0.2s ease;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.7);
    }
    70% {
      box-shadow: 0 0 0 6px rgba(255, 71, 87, 0);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(255, 71, 87, 0);
    }
  }
}